<link rel="stylesheet" href="styles/main.css">

<section class="hero text-center py-8">
  <h1 class="text-4xl font-bold">this is a website where brandon harwood can make things and break things</h1>

  <!-- Navigation Menu -->
  <nav class="menu mt-6">
    <ul class="flex justify-center space-x-6">
      <li><a href="#" class="filter-link" data-filter="weblogs">weblogs</a></li>
      <li><a href="#" class="filter-link" data-filter="built-things">built things</a></li>
      <li><a href="#" class="filter-link" data-filter="collections">collections</a></li>
      <li><a href="#" class="filter-link" data-filter="questions">questions</a></li>
      <li><a href="#" class="filter-link" data-filter="weird-interactions">weird interactions</a></li>
      <li><a href="#" id="about-link">about</a></li>
    </ul>
  </nav>

  <!-- Expanding About Section -->
  <div id="about-section" class="hidden mt-6">
    <p>
      it’s a place for weblogs, built things, collections, questions, and weird interactions.<br>
      it’s also not <a href="https://bah.design" class="underline">my portfolio</a>.  
      subscribe via <a href="/rss" class="underline">RSS</a> or <a href="/email" class="underline">Email</a>.
    </p>
  </div>

  <!-- Search Input -->
  <input type="text" id="search-input" placeholder="Search the feed..." 
         class="border p-2 w-full mt-6 max-w-lg mx-auto block" />
</section>

<!-- Feed Section -->
<section id="feed">
  {% for post in collections.allPosts %}
    <article class="post-card" data-type="{{ post.data.type }}" data-tags="{{ post.data.tags | join(' ') }}">
      <h2 class="text-2xl font-bold"><a href="{{ post.url }}">{{ post.data.title }}</a></h2>
      <p>{{ post.data.description }}</p>
    </article>
  {% endfor %}
</section>

<script>
  // Handle "About" Section Toggle
  document.getElementById('about-link').addEventListener('click', function(e) {
    e.preventDefault();
    document.getElementById('about-section').classList.toggle('hidden');
  });

  // Keep track of active filters
let activeFilters = new Set();

// Function to apply filters
function applyFilters() {
  document.querySelectorAll('.post-card').forEach(card => {
    const postType = card.dataset.type;

    // Show card if it matches an active filter or if no filters are active
    if (activeFilters.size === 0 || activeFilters.has(postType)) {
      card.style.display = 'block';
    } else {
      card.style.display = 'none';
    }
  });
}

// Handle filter toggling
document.querySelectorAll('.filter-link').forEach(link => {
  link.addEventListener('click', function(e) {
    e.preventDefault();
    const filter = this.dataset.filter;

    // Toggle filter in the activeFilters set
    if (activeFilters.has(filter)) {
      activeFilters.delete(filter); // Remove filter if it's active
      this.classList.remove('active'); // Optional: highlight active filter
    } else {
      activeFilters.add(filter); // Add filter if it’s not active
      this.classList.add('active'); // Optional: highlight active filter
    }

    applyFilters(); // Apply the updated filters
  });
});


  // Simple Client-Side Search
  document.getElementById('search-input').addEventListener('input', function() {
    const query = this.value.toLowerCase();
    document.querySelectorAll('.post-card').forEach(card => {
      const content = card.textContent.toLowerCase();
      card.style.display = content.includes(query) ? 'block' : 'none';
    });
  });
</script>
