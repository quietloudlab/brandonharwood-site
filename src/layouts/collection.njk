---
layout: base.njk
---

<div class="min-h-screen flex flex-col md:flex-row">
  <!-- Sidebar -->
  <aside class="relative md:fixed bg-white/[0.01] backdrop-blur-xl md:sticky md:top-0 sidebar-width p-4 back-nav z-40 md:h-screen flex flex-col">
    <div class="flex flex-col flex-1 min-h-0">
      <div class="mt-0">
        <!-- Back Button -->
        <button 
          onclick="handleBack()"
          class="flex items-center gap-2 text-[#333333] hover:text-[#001EFF] font-baskerville text-[1rem] transition-colors"
          aria-label="Go back to previous page"
        >
          <span aria-hidden="true">←</span>
          <span>back</span>
        </button>

        <!-- Collection Type -->
        <div class="mt-8">
          <div class="text-black text-[0.75rem] font-italic font-baskerville italic underline leading-6">
            collection
          </div>
        </div>
      </div>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="flex-1 p-8 md:px-20 pt-16 pb-16">
    <div class="max-w-[75rem] mx-auto">
      <header class="pb-6 border-b border-[#C0C0C0]">
        <h1 class="page-header w-full text-[2rem] font-manrope font-semibold">{{ title }}</h1>
        <p class="text-black font-baskerville text-[1rem] leading-7">{{ description }}</p>
      </header>

      <section class="masonry-grid mt-8">
        {% for item in items %}
          <div class="masonry-item {% if item.type == 'link' %}p-0{% else %}p-4{% endif %} bg-[#f9f9f9] rounded-lg shadow hover:shadow-lg transition-shadow">
            {% if item.type == "link" %}
              <!-- Link Preview -->
              <a href="{{ item.content }}" target="_blank" rel="noopener noreferrer" class="block hover:underline cursor-pointer">
                <div class="w-full h-full">
                    <img 
                    src="{{ linkPreviewImage[loop.index0] }}" 
                    alt="Preview for {{ item.content }}" 
                    class="w-full h-[240px] object-cover rounded-lg"
                    />
                </div>
              </a>

            {% elseif item.type == "image" %}
              <!-- Image Display -->
              <img src="{{ item.content }}" alt="Collection image" class="w-full h-auto rounded-md">

            {% elseif item.type == "snippet" %}
              <!-- Text Snippet -->
              <blockquote class="italic text-black font-baskerville text-sm leading-6">
                {{ item.content }}
                {% if item.note %}
                  <span class="block mt-2 text-xs text-[#666666]">— {{ item.note }}</span>
                {% endif %}
              </blockquote>
            {% endif %}
          </div>
        {% endfor %}
      </section>
    </div>
  </main>
</div>

<script>
  function handleBack() {
    const previousPage = document.referrer;
    const homeUrl = '/';
    
    if (previousPage && previousPage.includes(window.location.origin)) {
      history.back();
    } else {
      window.location.href = homeUrl;
    }
  }
</script>

<style>
  .collection-external-link {
    cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 -960 960 960' width='24' fill='%23000000'%3E%3Cpath d='M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h560v-280h80v280q0 33-23.5 56.5T760-120H200Zm280-360Zm167-220 64 64-284 284H360v-67l287-281Zm133 133-63-64 32-32q12-12 31-12t31 12l32 32q12 12 12 31t-12 31l-63 2Z'/%3E%3C/svg%3E") 12 12, auto;
  }

  .masonry-grid {
    columns: 3;
    column-gap: 2rem;
  }

  .masonry-item {
    break-inside: avoid;
    margin-bottom: 2rem;
  }

  @media (max-width: 1024px) {
    .masonry-grid {
      columns: 2;
    }
  }

  @media (max-width: 640px) {
    .masonry-grid {
      columns: 1;
      column-gap: 1rem;
    }
    
    .masonry-item {
      margin-bottom: 1rem;
    }
  }
</style>
